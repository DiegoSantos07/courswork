<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>

<style>

    body {
        background-color: #E3E7E8;
        font-family: Arial, Helvetica, sans-serif
    }
    .container {
        width: 100%;
        transition: 0.5s;
    }

    header {
        width: 100%
    }

  /* Internal CSS styles affecting the shopping cart, so that it is not affected by the styles.css made from Student 2 */
    header .shopping {
        position: relative;
        text-align: right;
    }

    header .shopping img {
        width: 40px;
    }

    header .shopping span {
        background: red;
        border-radius: 50%;
        display: flex;
        justify-content: right;
        align-items: right;
        color: #fff;
        position:absolute;
        top: -7px; /* Adjusting the position of the red circle */
        right: 25px;
        width: 20px; /* Adjusting the position of the quantity number inside the circle */
        height: 20px;
        padding: 5px;
    }

    .topBar {
        height: 5px;
        line-height: 100px;
        padding: 0 15px;
        border-bottom: 1px solid #fff;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .list {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        column-gap: 20px;
        row-gap: 20px;
        margin-top: 50px;
    }

    .list .item {
        text-align: center;
        background-color: #DCE0E1;
        padding: 20px;
        box-shadow: 0 50px 50px #a8aaaa;
        letter-spacing: 1px;
    }

    .list .item img {
        width: 90%;
        height: 430px;
        object-fit: cover;
    }

    .list .item .title {
        font-weight: 600;
    }

    .list .item .price { 
        margin: 10px;
    }

    .list .item button {
        background-color: #68a068;
        color: #fff;
        width: 100%;
        padding: 10px;
        border-radius: 3%;
        cursor: pointer; /* Adds a pointer when hovering */
    }

    .Cart {
        position: fixed;
        top:0;
        left: 100%;
        width: 500px;
        background-color: #b2d0a2;
        height: 100vh;
        transition: 0.5s;
        font-weight: bold;
        overflow-y: auto; /* Allows the cart to be scrollable when overflowing with items */
        z-index: 999; /* Allows the cart to be on top of the page, so it is not affected by the footer overlapping it */
        flex-direction: column; /* Align items vertically */
        justify-content: space-between; /* Align items with space between */
    }

    .active .Cart {
        left: calc(100% - 500px);
    }

    .active .container {
    transform: translateX(-200px);
    }

    .Cart h1 {
        color: #000000;
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        font-weight: 100;
        margin: 0;
        padding: 0 20px;
        height: 80px;
        display: flex;
        align-items: center;
    }

    .Cart .checkOut {
        position: absolute;
        bottom: 0;
        width: 100%;
        display: grid;
        grid-template-columns: repeat(2, 1fr);

    }

    .Cart .checkOut div {
        background-color: #d9e8e1;
        width: 100%;
        height: 70px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        cursor: pointer;
    }

    .Cart .checkOut div:nth-child(2) {
        background-color: #1C1F25;
        color: #fff;
    }

    .listCart li {
        display: grid;
        grid-template-columns: 100px repeat(3, 1fr);
        color: #fff;
        row-gap: 10px;
    }

    .listCart li div {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .listCart li img {
        width: 90%;
    }

    .listCart li button {
        background-color: #b2d0a2;
        border: none;
        cursor: pointer; /* Adds a pointer when hovering */
    }

    .listCart .count {
        margin: 0 10px;
    }

    .quantity-btn {
        background-color: green; 
        border: none;
        color: white;
        cursor: pointer;
    }

    label {
        width: 25%;
        margin-right: 0.5rem;
        padding-top: 0.2rem;
        text-align: right;
    }

    fieldset {
        background-color: #abd9c6;
        padding: 1em;
        font-weight: bold;
        font-style: oblique;
    }

    .submitButton {
        background-color: #262928;
        border: steelblue;
        color: white;
        padding: 5px 15px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 13px;
        margin: 4px 2px;
        cursor: pointer;
    }

</style>

<body class="">
    
    <div class="container">
        <!-- This header section contains the logo and navigation menu and the shopping cart icon -->
        <!-- Links are within an unordered list -->
        <header>
            <!-- Website logo and Navigation bar passed from Student 2 -->

            <div class="topBar">
            </div>
           
            <div class="logo">
                <img src="Images/image1.png" alt="Website Logo - Child planting a tree holding with hands stock photo. Reference: https://www.istockphoto.com/photo/child-planting-a-tree-holding-with-hands-gm1462151119-495782923?searchscope=image%2Cfilm">
            </div>
           
            <div class="climateGroup">
                <h1>Climate Group</a></h1>
                <p>Working with United Nations for a better planet.</p>
            </div>
            
            <nav>
                <ul>
                    <li><a href="https://w2005142.users.ecs.westminster.ac.uk/group/home.html">Home</a></li>
                    <li><a href="https://w2045954.users.ecs.westminster.ac.uk/group/gallery.html">Gallery</a></li>
                    <li><a href="https://w1994027.users.ecs.westminster.ac.uk/group/shop.html">Shop</a></li>
                    <li><a href="https://w1993048.users.ecs.westminster.ac.uk/group/userprofile.html">User Profile</a></li>
                    <li><a href="https://w2005142.users.ecs.westminster.ac.uk/group/feedback.html">Feedback</a></li>
                    <li><a href="https://w1993048.users.ecs.westminster.ac.uk/group/team.html">Team</a></li>
                    <li><a href="https://w2045954.users.ecs.westminster.ac.uk/group/sitemap.html">Sitemap</a></li>
                </ul>
            </nav>
            <!-- Code from Student 2 Ends here -->

            <h1>Shop</h1>
            <div class="shopping">
                <img src="Images/cart.jpg"> <!-- Reference: https://media.istockphoto.com/id/1128229893/vector/shopping-cart-icon.jpg?s=1024x1024&w=is&k=20&c=3nq_zKNEdKMJ4pGaFh90jQ-lG9jl108DCR1R5zp1HPM= -->
                <span class="quantity">0</span>
            </div>
                
            <style>

            </style>
        </header>

        <div class="list">
          <!-- There was a problem here displaying each item twice, only the second repition of items were interactive (to add to the cart etc...) so I took out the code.
           I have kept the list class because if I take it out then the rest of the items also disappear -->
        </div>
    </div>
    <!-- Code adapted from https://www.youtube.com/watch?v=bCTd1eRX7Iw&t=354s&pp=ygUeY29kaW5nIGEgY2hlY2tvdXQgcGFnZSBpbiBodG1s -->
   
    <div class="Cart">
        <!-- This section includes the item list, total price and close button -->
        <!-- There is a form to fill out for the user to provide their personal and card details -->
        <!-- The JavaScript function 'validateForm()' is called upon the form submission -->

        <h1>Checkout</h1>

        <ul class="listCart">
        </ul>
        <div class="checkOut">
            <div class="total">Â£0</div>
            <div class="closeShopping">Close</div>
        </div>
    

        <!-- Code adapted from W3Schools -->
        <!-- https://www.w3schools.com/tags/att_input_size.asp -->

        <!-- Code also adapted from Week 4 Lecture Notes and Tutorial -->
        <!-- https://intranet.ecs.westminster.ac.uk/modules/4COSC011W/forms.html -->


        <form id="checkoutForm" onsubmit="return validateForm()">
            <fieldset>
                <!-- Personal Details -->
                <legend> Personal Details:</legend><br> <!--Legend for the box-->
                <label for="fullName">Full Name<span>*</span></label>
                <input type="text" id="fullName" name="fullName" required>

                <br>
                
                <!-- Contact Information -->
                <label for="email">Email Address<span>*</span></label>
                <input type="email" id="email" name="email" required>

                <br>
                
                <!-- Shipping Address -->
                <label for="address">Shipping Address<span>*</span></label>
                <textarea id="address" name="address" required></textarea>

            </fieldset>

            <br>

            <fieldset>
                <!-- Card Details -->
                <legend>Card Details:</legend><br>
                <label for="cardNumber">Card Number<span>*</span></label>
                <input type="text" id="cardNumber" name="cardNumber" required>

                <br>
                
                <label for="expiryDate">Expiry Date<span>*</span></label>
                <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY" required maxlength="5" size="5">
                
                <label for="cvv">CVV<span>*</span></label>
                <input type="text" id="cvv" name="cvv" required maxlength="3" size="3">

                <br>
                
                <!-- Additional Information -->
                <label for="additionalInfo">Additional Information</label>
                <textarea id="additionalInfo" name="additionalInfo"></textarea>
                
                <br>
                
                <!-- Submit Button -->
                <button class="submitButton" type="submit">Complete Purchase</button>
            </fieldset>
        </form>
        
        <!-- Confirmation Message -->
        <div id="confirmationMessage" style="display: none;">
            <p>Thank you for your order!</p>
        </div>

    </div>

    

    <footer> <!-- Template taken from Student 2-->
        <h3><a href="https://w1994027.users.ecs.westminster.ac.uk/group/content_ST1.html">Page Editor</h3></a><br> <!--Redirects to my Page Editor page-->
        <p>Page created by Nael</p><br>

        <h3>Contact Us</h3><br>
        <p><address><a href="mailto:w1994027@westminster.ac.uk">E-mail: Nael Hanif</a></address><br>

        <h3>Address</h3><br>
        <p>115 New Cavendish St, London W1W 6UW</p><br>

        <h3>Accessibility</h3><br>
        <p>The website ensures accessibility by complying with the WCAG regulations. By providing alternative text and usability, we aim to provide the best experience with the website under improvements. </p>
        <p>If you have any accessibility concerns please let us know.</p>
    </footer>

    <script> // Some of the codes here have been adapted from https://www.youtube.com/watch?v=bCTd1eRX7Iw&t=354s&pp=ygUVY29kaW5nIGEgc2hvcCBpbiBodG1s

        let openShopping = document.querySelector('.shopping');
        let closeShopping = document.querySelector('.closeShopping');
        let list = document.querySelector('.list');
        let listCart = document.querySelector('.listCart');
        let body = document.querySelector('body');
        let total = document.querySelector('.total');
        let quantity = document.querySelector('.quantity');

        openShopping.addEventListener('click', () => {
            body.classList.add('active');
        });
        closeShopping.addEventListener('click', () => {
            body.classList.remove('active');
        });

        let products = [
            {
                id: 1,
                name: 'Recyclable T-Shirt',
                image: 't-shirt.jpg',
                price: 15,
                description: 'Made from cotton and recyclable materials, an eco-friendly T-shirt.'
            },
            {
                id: 2,
                name: 'Reusable Bags',
                image: 'bag.jpg',
                price: 8,
                description: 'Durable and perfect for reducing plastic waste.'
            },
            {
                id: 3,
                name: 'Reusable Water Bottle',
                image: 'bottle.jpg',
                price: 12,
                description: 'Made from high quality stainless steel to keep your drinks cold or hot for hours.'
            },
            {
                id: 4,
                name: 'House Plant',
                image: 'plant.jpg',
                price: 7,
                description: 'Adding a touch of nature to your home. Easy to care for and easy to maintain.'
            }
        ];

        let listCarts = [];

        function initApp() { // This function is called when the page loads
            products.forEach((value, key) => {
                let newDiv = document.createElement('div');
                newDiv.classList.add('item');
                newDiv.innerHTML = `
                    <img src="Images/${value.image}">
                    <div class="title">${value.name}</div>
                    <div class="description">${value.description}</div> <!-- Add description here --> 
                    <div class="price">Â£${value.price}</div>
                    <button onclick="addToCart(${key})">Add To Cart</button>`;
                list.appendChild(newDiv);
            });
        }

        function addToCart(key) { // This function is called when the user clicks on the "Add to Cart" button
            if (listCarts[key] == null) {
                listCarts[key] = { ...products[key], quantity: 1 };
            } else {
                listCarts[key].quantity++;
            }
            reloadCart();
        }

        function reloadCart() {
            listCart.innerHTML = '';
            let count = 0;
            let totalPrice = 0;
            listCarts.forEach((value, key) => {
                if (value != null) {
                    let newDiv = document.createElement('li');
                    newDiv.innerHTML = `
                        <div><img src="Images/${value.image}" alt="${value.name}"></div>
                        <div>${value.name}</div>
                        <div>Â£${(value.price * value.quantity).toFixed(2)}</div>
                        <div>
                            <button onclick="changeQuantity(${key}, ${value.quantity - 1})">-</button>
                            <div class="count">${value.quantity}</div>
                            <button onclick="changeQuantity(${key}, ${value.quantity + 1})">+</button>
                        </div>`;
                    listCart.appendChild(newDiv);
                    totalPrice += value.price * value.quantity;
                    count += value.quantity;
                }
            });
            total.innerText = 'Â£' + totalPrice.toFixed(2);
            quantity.innerText = count;
        }

        function validateForm() {
        // Retrieve form inputs
        var fullName = document.getElementById('fullName').value;
        var email = document.getElementById('email').value;
        var address = document.getElementById('address').value;
        var cardNumber = document.getElementById('cardNumber').value;
        var expiryDate = document.getElementById('expiryDate').value;
        var cvv = document.getElementById('cvv').value;
        
        // Validate inputs
        if (fullName.trim() === '' || email.trim() === '' || address.trim() === '' || 
            cardNumber.trim() === '' || expiryDate.trim() === '' || cvv.trim() === '') {
            alert('Please fill in all required fields.');
            return false;
        }
        
        
        // Display confirmation message
        document.getElementById('checkoutForm').style.display = 'none';
        document.getElementById('confirmationMessage').style.display = 'block';
        
        return false; // Prevent form submission
    }

        function changeQuantity(key, quantity) {
            if (quantity <= 0) {
                delete listCarts[key];
            } else {
                listCarts[key].quantity = quantity;
            }
            reloadCart();
        }

        initApp();
    </script>
</body>
</html>
